(()=>{var e={427:(e,t,r)=>{const o=r(942),a=r(431);r(922),e.exports=function(){return{attacked:[],carrierHitbox:[],battleshipHitbox:[],destroyerHitbox:[],submarineHitbox:[],patrolboatHitbox:[],createBoard(e){const t=document.querySelector(".leftGrid"),r=document.querySelector(".rightGrid");let o=[],a=[0,1,2,3,4,5,6,7,8,9];a.forEach((e=>{for(let t=0;t<a.length;t++)o.push([e,a[t]])}));for(let a of o){let o=document.createElement("div");"player"==e?(o.classList.add("leftCells"),o.setAttribute("id",`left${[a[0],a[1]]}`),t.appendChild(o)):(o.classList.add("rightCells"),o.setAttribute("id",`right${[a[0],a[1]]}`),r.appendChild(o))}},placeShip(e,t,r){if(t[1]+e.length>10)return console.log("doh"),!1;const i=`${e.name}Hitbox`;for(let s=0;s<e.length;s++){const e=t[0],h=t[1]+s;this[i].push([e,h]),"player"==r?o([e,h],"green"):a([e,h],"green")}return this[i]},receiveAttack(e){this.attacked.push(e),console.log(this.attacked);const t=[this.carrierHitbox,this.battleshipHitbox,this.destroyerHitbox,this.submarineHitbox,this.patrolboatHitbox];for(let r of t){for(let t of r){if(console.log(t),t[0]==e[0]&&t[1]==e[1]){o(e,"red");break}o(e,"white")}break}return e},allShipsSunk:e=>e.every((e=>e.isSunk()))}}},942:e=>{e.exports=function(e,t){console.log("e"),document.getElementById(`left${e[0]},${e[1]}`).style.backgroundColor=t}},431:e=>{e.exports=function(e,t){document.getElementById(`right${e[0]},${e[1]}`).style.backgroundColor=t}},922:e=>{e.exports=function(e,t,r){return{length:e,name:t,hit:r,gotHit(){if(e>r)return console.log("test"),this.hit+=1,this.hit},isSunk(){return this.length<=this.hit}}}}},t={};function r(o){var a=t[o];if(void 0!==a)return a.exports;var i=t[o]={exports:{}};return e[o](i,i.exports,r),i.exports}(()=>{const e=r(922),t=r(427);r(942),r(431);class o{constructor(e,t){this.name="player",this.board=e,this.carrier=this.createCarrier(),this.battleship=this.createBattleship(),this.destroyer=this.createDestroyer(),this.submarine=this.createSubmarine(),this.patrolboat=this.createPatrolboat(),this.ships=[this.carrier,this.battleship,this.destroyer,this.submarine,this.patrolboat],this.enemy="enemy",this.enemyBoard=t,this.enemyCarrier=this.createCarrier(),this.enemyBattleship=this.createBattleship(),this.enemyDestroyer=this.createDestroyer(),this.enemySubmarine=this.createSubmarine(),this.enemyPatrolboat=this.createPatrolboat()}attack(){"player"==this.name&&document.querySelectorAll(".rightCells").forEach((e=>{e.addEventListener("click",(()=>{setTimeout((()=>{this.board.receiveAttack(this.cpuAttackCoord())}),200)}))}))}cpuAttackCoord(){let e=this.generateCoord();for(;this.board.attacked.some((t=>t[0]==e[0]&&t[1]==e[1]));)e=this.generateCoord();return e}generateCoord(){return[Math.floor(10*Math.random()),Math.floor(10*Math.random())]}generateShipCoord(e){return[Math.floor(10*Math.random()),Math.floor(Math.random()*(10-e.length))]}placeCpuShips(){let e=[this.enemyCarrier,this.enemyBattleship,this.enemyDestroyer,this.enemySubmarine,this.enemyPatrolboat];for(let t of e){let e=[this.enemyBoard.carrierHitbox,this.enemyBoard.battleshipHitbox,this.enemyBoard.destroyerHitbox,this.enemyBoard.submarineHitbox,this.enemyBoard.patrolboatHitbox],r=[].concat(...e),o=this.generateShipCoord(t);for(;r.some((e=>e[1]==o[1]+t.length||e[0]==o[0]&&e[1]==o[1]));)o=this.generateShipCoord(t);this.enemyBoard.placeShip(t,o,"enemy"),console.log(e)}}checkGameOver(){this.board.allShipsSunk(this.ships)&&alert("You lost u fkn noob")}createPlayerBoard(){this.board.createBoard(this.name)}createEnemyBoard(){this.enemyBoard.createBoard("enemy")}createCarrier(){return e(5,"carrier",0)}createBattleship(){return e(4,"battleship",0)}createDestroyer(){return e(3,"destroyer",0)}createSubmarine(){return e(3,"submarine",0)}createPatrolboat(){return e(2,"patrolboat",0)}}!function(){let e=t(),r=t(),a=new o(r,e);a.createPlayerBoard(),a.createEnemyBoard(),a.placeCpuShips(),a.board.placeShip(a.carrier,[5,4],"player"),a.attack()}()})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SUFBTVksRUFBSSxJQUFNWixFQUFJLE1BQzlCQSxFQUFNL0MsS0FBS3FELGtCQUFrQjdELEdBR2pDUSxLQUFLeUIsV0FBV2xDLFVBQVVDLEVBQU11RCxFQUFLLFNBQ3JDcEQsUUFBUUMsSUFBSTRELEVBQ2hCLENBRUosQ0FDQUksZ0JBQ081RCxLQUFLd0IsTUFBTXBCLGFBQWFKLEtBQUtLLFFBQzVCd0QsTUFBTSxzQkFFZCxDQUNBQyxvQkFDSTlELEtBQUt3QixNQUFNckQsWUFBWTZCLEtBQUtOLEtBQ2hDLENBQ0FxRSxtQkFDSS9ELEtBQUt5QixXQUFXdEQsWUFBWSxRQUNoQyxDQUNBd0QsZ0JBRUksT0FEZ0JQLEVBQVksRUFBRyxVQUFXLEVBRTlDLENBQ0FTLG1CQUVJLE9BRG1CVCxFQUFZLEVBQUcsYUFBYyxFQUVwRCxDQUNBVyxrQkFFSSxPQURrQlgsRUFBWSxFQUFHLFlBQWEsRUFFbEQsQ0FDQWEsa0JBRUksT0FEa0JiLEVBQVksRUFBRyxZQUFhLEVBRWxELENBQ0FlLG1CQUVJLE9BRG1CZixFQUFZLEVBQUcsYUFBYyxFQUVwRCxHQUlKLFdBQ0ksSUFBSUssRUFBYUosSUFDYjJDLEVBQWMzQyxJQUNkNEMsRUFBUyxJQUFJM0MsRUFBTzBDLEVBQWF2QyxHQUNyQ3dDLEVBQU9ILG9CQUNQRyxFQUFPRixtQkFFUEUsRUFBT1gsZ0JBQ1BXLEVBQU96QyxNQUFNakMsVUFBVTBFLEVBQU92QyxRQUFTLENBQUMsRUFBRSxHQUFJLFVBQzlDdUMsRUFBT3ZCLFFBR1gsQ0FDQXdCLEUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL2dhbWVCb2FyZC5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL2xlZnRET00uanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9yaWdodERPTS5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL3NoaXBGYWN0b3J5LmpzIiwid2VicGFjazovL2JhdHRsZXNoaXAvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBwbGF5ZXJET00gPSByZXF1aXJlKCcuL2xlZnRET00nKVxuY29uc3QgZW5lbXlET00gPSByZXF1aXJlKCcuL3JpZ2h0RE9NJylcbmNvbnN0IHNoaXBGYWN0b3J5ID0gcmVxdWlyZSgnLi9zaGlwRmFjdG9yeScpXG5mdW5jdGlvbiBnYW1lQm9hcmQoKXtcbiAgICByZXR1cm4ge1xuICAgICAgICBhdHRhY2tlZDogW10sXG4gICAgICAgIGNhcnJpZXJIaXRib3g6IFtdLFxuICAgICAgICBiYXR0bGVzaGlwSGl0Ym94OiBbXSxcbiAgICAgICAgZGVzdHJveWVySGl0Ym94OiBbXSxcbiAgICAgICAgc3VibWFyaW5lSGl0Ym94OiBbXSxcbiAgICAgICAgcGF0cm9sYm9hdEhpdGJveDogW10sXG5cbiAgICAgICAgY3JlYXRlQm9hcmQocGxheWVyTmFtZSl7XG4gICAgICAgICAgICBjb25zdCBsZWZ0R3JpZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5sZWZ0R3JpZCcpXG4gICAgICAgICAgICBjb25zdCByaWdodEdyaWQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucmlnaHRHcmlkJylcbiAgICAgICAgICAgIGxldCBjb29yZHMgPSBbXTtcbiAgICAgICAgICAgIGxldCB4QXhpcyA9IFswLDEsMiwzLDQsNSw2LDcsOCw5XVxuICAgICAgICAgICAgeEF4aXMuZm9yRWFjaChlbCA9PiB7XG4gICAgICAgICAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHhBeGlzLmxlbmd0aDsgaSsrKSBjb29yZHMucHVzaChbZWwsIHhBeGlzW2ldXSk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgZm9yIChsZXQgZSBvZiBjb29yZHMpIHtcbiAgICAgICAgICAgICAgICBsZXQgY2VsbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmKHBsYXllck5hbWUgPT0gJ3BsYXllcicpe1xuICAgICAgICAgICAgICAgICAgICBjZWxsLmNsYXNzTGlzdC5hZGQoJ2xlZnRDZWxscycpO1xuICAgICAgICAgICAgICAgICAgICBjZWxsLnNldEF0dHJpYnV0ZSgnaWQnLCBgbGVmdCR7W2VbMF0sIGVbMV1dfWApO1xuICAgICAgICAgICAgICAgICAgICBsZWZ0R3JpZC5hcHBlbmRDaGlsZChjZWxsKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjZWxsLmNsYXNzTGlzdC5hZGQoJ3JpZ2h0Q2VsbHMnKTtcbiAgICAgICAgICAgICAgICAgICAgY2VsbC5zZXRBdHRyaWJ1dGUoJ2lkJywgYHJpZ2h0JHtbZVswXSwgZVsxXV19YCk7XG4gICAgICAgICAgICAgICAgICAgIHJpZ2h0R3JpZC5hcHBlbmRDaGlsZChjZWxsKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHBsYWNlU2hpcChzaGlwLCBjb29yZCwgbmFtZSkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoY29vcmRbMV0gKyBzaGlwLmxlbmd0aCA+IDEwKSB7XG5cbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZG9oJylcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBoaXRib3hLZXkgPSBgJHtzaGlwLm5hbWV9SGl0Ym94YDtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2hpcC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHggPSBjb29yZFswXTtcbiAgICAgICAgICAgICAgICBjb25zdCB5ID0gY29vcmRbMV0gKyBpO1xuICAgICAgICAgICAgICAgIHRoaXNbaGl0Ym94S2V5XS5wdXNoKFt4LCB5XSk7XG4gICAgICAgICAgICAgICAgaWYobmFtZSA9PSAncGxheWVyJyl7XG4gICAgICAgICAgICAgICAgICAgIHBsYXllckRPTShbeCx5XSwgJ2dyZWVuJylcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBlbmVteURPTShbeCx5XSwgJ2dyZWVuJylcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpc1toaXRib3hLZXldO1xuICAgICAgICB9LFxuICAgICAgICByZWNlaXZlQXR0YWNrKGNvb3JkKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuYXR0YWNrZWQucHVzaChjb29yZCk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmF0dGFja2VkKVxuICAgICAgICAgICAgY29uc3Qgc2hpcEhpdGJveGVzID0gW3RoaXMuY2FycmllckhpdGJveCwgdGhpcy5iYXR0bGVzaGlwSGl0Ym94LCB0aGlzLmRlc3Ryb3llckhpdGJveCxcbiAgICAgICAgICAgIHRoaXMuc3VibWFyaW5lSGl0Ym94LCB0aGlzLnBhdHJvbGJvYXRIaXRib3hdXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGZvcihsZXQgc2hpcCBvZiBzaGlwSGl0Ym94ZXMpe1xuICAgICAgICAgICAgICAgIGZvcihsZXQgaGl0Ym94ZXMgb2Ygc2hpcCl7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGhpdGJveGVzKTtcbiAgICAgICAgICAgICAgICAgICAgaWYoaGl0Ym94ZXNbMF0gPT0gY29vcmRbMF0gJiYgaGl0Ym94ZXNbMV0gPT0gY29vcmRbMV0pe1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNvbG9yID0gJ3JlZCdcbiAgICAgICAgICAgICAgICAgICAgICAgIHBsYXllckRPTShjb29yZCwgY29sb3IpXG4gICAgICAgICAgICAgICAgICAgICAgICAvL3JldHVybiBzaGlwSGl0Ym94ZXMuaW5kZXhPZihzaGlwKVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjb2xvciA9ICd3aGl0ZSdcbiAgICAgICAgICAgICAgICAgICAgICAgIHBsYXllckRPTShjb29yZCwgY29sb3IpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY29vcmRcbiAgICAgICAgfSxcbiAgICAgICAgYWxsU2hpcHNTdW5rKHNoaXBzKXtcbiAgICAgICAgICAgIHJldHVybiBzaGlwcy5ldmVyeShzaGlwID0+IHNoaXAuaXNTdW5rKCkpXG4gICAgICAgIH1cbiAgICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZ2FtZUJvYXJkIiwiZnVuY3Rpb24gcGxheWVyRE9NKGNvb3JkLCBjb2xvcil7XG4gICAgXG4gICAgY29uc29sZS5sb2coJ2UnKTtcbiAgICAvL2xldCBjZWxsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYGxlZnQke2Nvb3JkWzBdfWAsYCR7Y29vcmRbMV19YClcbiAgICBsZXQgY2VsbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBsZWZ0JHtjb29yZFswXX0sJHtjb29yZFsxXX1gKVxuICAgIGNlbGwuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gY29sb3Jcbn1cbm1vZHVsZS5leHBvcnRzID0gcGxheWVyRE9NXG4iLCJmdW5jdGlvbiBlbmVteURPTShjb29yZCxjb2xvcikge1xuICAgIGxldCBjZWxsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYHJpZ2h0JHtjb29yZFswXX0sJHtjb29yZFsxXX1gKVxuICAgIGNlbGwuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gY29sb3Jcbn1cbiAgXG5cbi8qXG5mdW5jdGlvbiBjcHVET00oZ2FtZUJvYXJkLCBzaGlwc0FycmF5LCBvdmVyYWxsSGl0Ym94KXtcbiAgICBsZXQgZG9tQm9hcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucmlnaHRHcmlkJylcbiAgICBnYW1lQm9hcmQuZm9yRWFjaChlID0+e1xuICAgICAgICBsZXQgY2VsbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgICAgIGNlbGwuY2xhc3NMaXN0LmFkZCgncmlnaHRDZWxscycpXG4gICAgICAgIGNlbGwuc2V0QXR0cmlidXRlKCdpZCcsIGAke1tlWzBdLCBlWzFdXX1gKVxuICAgICAgICBkb21Cb2FyZC5hcHBlbmRDaGlsZChjZWxsKVxuICAgICAgICBjZWxsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCk9PntcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKG92ZXJhbGxIaXRib3gpXG4gICAgICAgICAgICBvdmVyYWxsSGl0Ym94LmZvckVhY2goZSA9PntcbiAgICAgICAgICAgICAgICBpZihjZWxsLmlkID09IGAke2VbMF19LCR7ZVsxXX1gKXtcbiAgICAgICAgICAgICAgICAgICAgY2VsbC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAncmVkJztcbiAgICAgICAgICAgICAgICAgICAgY2VsbC5zdHlsZS5vcGFjaXR5ID0gJzAuNidcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgXG4gICAgICAgIH0pXG4gICAgICAgIFxuICAgIH0pXG4gICAgXG59XG4qL1xuXG5tb2R1bGUuZXhwb3J0cyA9IGVuZW15RE9NIiwiZnVuY3Rpb24gc2hpcEZhY3RvcnkobGVuZ3RoLCBuYW1lLCBoaXQpe1xuICAgIHJldHVybntcbiAgICAgICAgbGVuZ3RoLFxuICAgICAgICBuYW1lLFxuICAgICAgICBoaXQsXG4gICAgICAgIGdvdEhpdCgpe1xuICAgICAgICAgICAgaWYobGVuZ3RoID4gaGl0KXtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygndGVzdCcpXG4gICAgICAgICAgICAgICAgdGhpcy5oaXQgKz0gMVxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmhpdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgaXNTdW5rKCl7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5sZW5ndGggPD0gdGhpcy5oaXQ7XG4gICAgICAgIH1cbiAgICB9ICAgXG59XG5cbm1vZHVsZS5leHBvcnRzID0gc2hpcEZhY3RvcnlcbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCJjb25zdCBzaGlwRmFjdG9yeSA9IHJlcXVpcmUoJy4vc2hpcEZhY3RvcnknKVxuY29uc3QgZ2FtZUJvYXJkID0gcmVxdWlyZSgnLi9nYW1lQm9hcmQnKVxuLy9jb25zdCBwbGF5ZXIgPSByZXF1aXJlKCcuL3BsYXllcicpXG4vL2NvbnN0IGNwdSA9IHJlcXVpcmUoJy4vcGxheWVyJylcbmNvbnN0IHBsYXllckRPTSA9IHJlcXVpcmUoJy4vbGVmdERPTScpXG5jb25zdCBjcHVET00gPSByZXF1aXJlKCcuL3JpZ2h0RE9NLmpzJyk7XG5cbmNsYXNzIFBsYXllcntcbiAgICBjb25zdHJ1Y3Rvcihib2FyZCxlbmVteUJvYXJkKXtcbiAgICAgICAgdGhpcy5uYW1lID0gJ3BsYXllcic7XG4gICAgICAgIHRoaXMuYm9hcmQgPSBib2FyZDsgXG5cbiAgICAgICAgdGhpcy5jYXJyaWVyID0gdGhpcy5jcmVhdGVDYXJyaWVyKClcbiAgICAgICAgdGhpcy5iYXR0bGVzaGlwID0gdGhpcy5jcmVhdGVCYXR0bGVzaGlwKClcbiAgICAgICAgdGhpcy5kZXN0cm95ZXIgPSB0aGlzLmNyZWF0ZURlc3Ryb3llcigpXG4gICAgICAgIHRoaXMuc3VibWFyaW5lID0gdGhpcy5jcmVhdGVTdWJtYXJpbmUoKVxuICAgICAgICB0aGlzLnBhdHJvbGJvYXQgPSB0aGlzLmNyZWF0ZVBhdHJvbGJvYXQoKVxuXG4gICAgICAgIHRoaXMuc2hpcHMgPSBbdGhpcy5jYXJyaWVyLCB0aGlzLmJhdHRsZXNoaXAsIHRoaXMuZGVzdHJveWVyLCB0aGlzLnN1Ym1hcmluZSwgdGhpcy5wYXRyb2xib2F0XVxuXG4gICAgICAgIHRoaXMuZW5lbXkgPSAnZW5lbXknXG4gICAgICAgIHRoaXMuZW5lbXlCb2FyZCA9IGVuZW15Qm9hcmQ7XG5cbiAgICAgICAgdGhpcy5lbmVteUNhcnJpZXIgPSB0aGlzLmNyZWF0ZUNhcnJpZXIoKVxuICAgICAgICB0aGlzLmVuZW15QmF0dGxlc2hpcCA9IHRoaXMuY3JlYXRlQmF0dGxlc2hpcCgpXG4gICAgICAgIHRoaXMuZW5lbXlEZXN0cm95ZXIgPSB0aGlzLmNyZWF0ZURlc3Ryb3llcigpXG4gICAgICAgIHRoaXMuZW5lbXlTdWJtYXJpbmUgPSB0aGlzLmNyZWF0ZVN1Ym1hcmluZSgpXG4gICAgICAgIHRoaXMuZW5lbXlQYXRyb2xib2F0ID0gdGhpcy5jcmVhdGVQYXRyb2xib2F0KClcbiAgICAgICAgXG4gICAgfVxuICAgIGF0dGFjaygpe1xuICAgICAgICBpZih0aGlzLm5hbWUgPT0gJ3BsYXllcicpe1xuICAgICAgICAgICAgY29uc3QgY3B1Q2VsbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucmlnaHRDZWxscycpO1xuICAgICAgICAgICAgY3B1Q2VsbHMuZm9yRWFjaChjZWxsID0+e1xuICAgICAgICAgICAgICAgIGNlbGwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKT0+e1xuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpPT57XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmJvYXJkLnJlY2VpdmVBdHRhY2sodGhpcy5jcHVBdHRhY2tDb29yZCgpKVxuICAgICAgICAgICAgICAgICAgICB9LCAyMDApXG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgfVxuICAgIGNwdUF0dGFja0Nvb3JkKCl7XG4gICAgICAgIGxldCBnZW4gPSB0aGlzLmdlbmVyYXRlQ29vcmQoKTtcbiAgICAgICAgd2hpbGUgKHRoaXMuYm9hcmQuYXR0YWNrZWQuc29tZShlID0+IGVbMF0gPT0gZ2VuWzBdICYmIGVbMV0gPT0gZ2VuWzFdKSkge1xuICAgICAgICAgICAgZ2VuID0gdGhpcy5nZW5lcmF0ZUNvb3JkKClcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZ2VuXG4gICAgfVxuICAgIGdlbmVyYXRlQ29vcmQoKXtcbiAgICAgICAgcmV0dXJuIFtNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMCksIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwKV1cbiAgICB9XG4gICAgZ2VuZXJhdGVTaGlwQ29vcmQoc2hpcCl7XG4gICAgICAgIHJldHVybiBbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTApLCBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAoMTAgLSBzaGlwLmxlbmd0aCkpXVxuICAgIH1cbiAgICBwbGFjZUNwdVNoaXBzKCl7XG4gICAgICAgIGxldCBlbmVteVNoaXBzID0gW3RoaXMuZW5lbXlDYXJyaWVyLCB0aGlzLmVuZW15QmF0dGxlc2hpcCwgdGhpcy5lbmVteURlc3Ryb3llcixcbiAgICAgICAgdGhpcy5lbmVteVN1Ym1hcmluZSwgdGhpcy5lbmVteVBhdHJvbGJvYXRdXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgZm9yKGxldCBzaGlwIG9mIGVuZW15U2hpcHMpe1xuICAgICAgICAgICAgbGV0IG9jY3VwaWVkID0gW3RoaXMuZW5lbXlCb2FyZC5jYXJyaWVySGl0Ym94LCB0aGlzLmVuZW15Qm9hcmQuYmF0dGxlc2hpcEhpdGJveCxcbiAgICAgICAgICAgICAgICB0aGlzLmVuZW15Qm9hcmQuZGVzdHJveWVySGl0Ym94LCB0aGlzLmVuZW15Qm9hcmQuc3VibWFyaW5lSGl0Ym94LCBcbiAgICAgICAgICAgICAgICB0aGlzLmVuZW15Qm9hcmQucGF0cm9sYm9hdEhpdGJveF1cbiAgICAgICAgICAgIGxldCBvY2N1cGllZFRvdGFsID0gW10uY29uY2F0KC4uLm9jY3VwaWVkKVxuICAgICAgICAgICAgbGV0IGdlbiA9IHRoaXMuZ2VuZXJhdGVTaGlwQ29vcmQoc2hpcClcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgd2hpbGUob2NjdXBpZWRUb3RhbC5zb21lKG9jYyA9PiBvY2NbMV0gPT0gKGdlblsxXSArIHNoaXAubGVuZ3RoKSB8fFxuICAgICAgICAgICAgb2NjWzBdID09IGdlblswXSAmJiBvY2NbMV0gPT0gZ2VuWzFdKSl7XG4gICAgICAgICAgICAgICAgZ2VuID0gdGhpcy5nZW5lcmF0ZVNoaXBDb29yZChzaGlwKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLmVuZW15Qm9hcmQucGxhY2VTaGlwKHNoaXAsIGdlbiwgJ2VuZW15JylcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKG9jY3VwaWVkKVxuICAgICAgICB9XG4gICAgICAgIFxuICAgIH1cbiAgICBjaGVja0dhbWVPdmVyKCl7XG4gICAgICAgIGlmKHRoaXMuYm9hcmQuYWxsU2hpcHNTdW5rKHRoaXMuc2hpcHMpKXtcbiAgICAgICAgICAgIGFsZXJ0KCdZb3UgbG9zdCB1IGZrbiBub29iJylcbiAgICAgICAgfVxuICAgIH1cbiAgICBjcmVhdGVQbGF5ZXJCb2FyZCgpe1xuICAgICAgICB0aGlzLmJvYXJkLmNyZWF0ZUJvYXJkKHRoaXMubmFtZSlcbiAgICB9XG4gICAgY3JlYXRlRW5lbXlCb2FyZCgpe1xuICAgICAgICB0aGlzLmVuZW15Qm9hcmQuY3JlYXRlQm9hcmQoJ2VuZW15JylcbiAgICB9XG4gICAgY3JlYXRlQ2Fycmllcigpe1xuICAgICAgICBjb25zdCBjYXJyaWVyID0gc2hpcEZhY3RvcnkoNSwgJ2NhcnJpZXInLCAwKVxuICAgICAgICByZXR1cm4gY2FycmllclxuICAgIH1cbiAgICBjcmVhdGVCYXR0bGVzaGlwKCl7XG4gICAgICAgIGNvbnN0IGJhdHRsZXNoaXAgPSBzaGlwRmFjdG9yeSg0LCAnYmF0dGxlc2hpcCcsIDApXG4gICAgICAgIHJldHVybiBiYXR0bGVzaGlwXG4gICAgfVxuICAgIGNyZWF0ZURlc3Ryb3llcigpe1xuICAgICAgICBjb25zdCBkZXN0cm95ZXIgPSBzaGlwRmFjdG9yeSgzLCAnZGVzdHJveWVyJywgMClcbiAgICAgICAgcmV0dXJuIGRlc3Ryb3llclxuICAgIH1cbiAgICBjcmVhdGVTdWJtYXJpbmUoKXtcbiAgICAgICAgY29uc3Qgc3VibWFyaW5lID0gc2hpcEZhY3RvcnkoMywgJ3N1Ym1hcmluZScsIDApXG4gICAgICAgIHJldHVybiBzdWJtYXJpbmVcbiAgICB9XG4gICAgY3JlYXRlUGF0cm9sYm9hdCgpe1xuICAgICAgICBjb25zdCBwYXRyb2xib2F0ID0gc2hpcEZhY3RvcnkoMiwgJ3BhdHJvbGJvYXQnLCAwKVxuICAgICAgICByZXR1cm4gcGF0cm9sYm9hdFxuICAgIH1cblxuXG59XG5mdW5jdGlvbiBnYW1lTG9vcCgpe1xuICAgIGxldCBlbmVteUJvYXJkID0gZ2FtZUJvYXJkKClcbiAgICBsZXQgcGxheWVyQm9hcmQgPSBnYW1lQm9hcmQoKVxuICAgIGxldCBwbGF5ZXIgPSBuZXcgUGxheWVyKHBsYXllckJvYXJkLCBlbmVteUJvYXJkKVxuICAgIHBsYXllci5jcmVhdGVQbGF5ZXJCb2FyZCgpXG4gICAgcGxheWVyLmNyZWF0ZUVuZW15Qm9hcmQoKVxuICAgIFxuICAgIHBsYXllci5wbGFjZUNwdVNoaXBzKClcbiAgICBwbGF5ZXIuYm9hcmQucGxhY2VTaGlwKHBsYXllci5jYXJyaWVyLCBbNSw0XSwgJ3BsYXllcicpXG4gICAgcGxheWVyLmF0dGFjaygpXG4gICAgXG4gICAgXG59XG5nYW1lTG9vcCgpXG4vKlxuZnVuY3Rpb24gZ2FtZUxvb3AoKXtcbiAgICBsZXQgZW5lbXlCb2FyZCA9IGdhbWVCb2FyZCgpXG4gICAgbGV0IHBsYXllckJvYXJkID0gZ2FtZUJvYXJkKClcbiAgICBsZXQgcGxheWVyID0gbmV3IFBsYXllcigncGxheWVyJywgcGxheWVyQm9hcmQsIGVuZW15Qm9hcmQpXG4gICAgcGxheWVyLmNyZWF0ZVBsYXllckJvYXJkKClcbiAgICBwbGF5ZXIuYm9hcmQucGxhY2VTaGlwKHBsYXllci5jYXJyaWVyLCBbNSw0XSlcbiAgICBcbiAgICBsZXQgY3B1Qm9hcmQgPSBnYW1lQm9hcmQoKVxuICAgIGxldCBjcHUgPSBuZXcgUGxheWVyKCdjcHUnLCBjcHVCb2FyZClcbiAgICBjcHUuY3JlYXRlUGxheWVyQm9hcmQoKVxuICAgIHBsYXllci5hdHRhY2soKVxufVxuZ2FtZUxvb3AoKVxuKi9cblxuLypcbmZ1bmN0aW9uIHBsYXllcigpe1xuICAgIGNvbnNvbGUubG9nKCdwcHBwJyk7XG4gICAgbGV0IHRlc3RDb29yZCA9IFs1LDRdXG4gICAgbGV0IGRvbUJvYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmxlZnRHcmlkJylcbiAgICBsZXQgcGxheWVyTmFtZSA9ICdwbGF5ZXInXG4gICAgY29uc3QgY2FycmllciA9IHNoaXBGYWN0b3J5KDUsICdjYXJyaWVyJywgMClcbiAgICBjb25zdCBiYXR0bGVzaGlwID0gc2hpcEZhY3RvcnkoNCwgJ2JhdHRsZXNoaXAnLCAwKVxuICAgIGNvbnN0IGRlc3Ryb3llciA9IHNoaXBGYWN0b3J5KDMsICdkZXN0cm95ZXInLCAwKVxuICAgIGNvbnN0IHN1Ym1hcmluZSA9IHNoaXBGYWN0b3J5KDMsICdzdWJtYXJpbmUnLCAwKVxuICAgIGNvbnN0IHBhdHJvbGJvYXQgPSBzaGlwRmFjdG9yeSgyLCAncGF0cm9sYm9hdCcsIDApXG4gICAgY29uc3QgcGxheWVyR2FtZUJvYXJkID0gZ2FtZUJvYXJkKClcbiAgICBwbGF5ZXJHYW1lQm9hcmQuY3JlYXRlQm9hcmQoZG9tQm9hcmQscGxheWVyTmFtZSlcbiAgICBwbGF5ZXJHYW1lQm9hcmQucGxhY2VTaGlwKGNhcnJpZXIsIFs1LDRdKVxuICAgIHBsYXllckdhbWVCb2FyZC5wbGFjZVNoaXAoYmF0dGxlc2hpcCwgWzIsNl0pXG4gICAgcGxheWVyR2FtZUJvYXJkLnBsYWNlU2hpcChkZXN0cm95ZXIsIFsxLDVdKVxuICAgIHBsYXllckdhbWVCb2FyZC5wbGFjZVNoaXAoc3VibWFyaW5lLCBbNCw0XSlcbiAgICBwbGF5ZXJHYW1lQm9hcmQucGxhY2VTaGlwKHBhdHJvbGJvYXQsIFs2LDRdKVxuICAgIGNvbnN0IHNoaXBzID0gW2NhcnJpZXIsIGJhdHRsZXNoaXAsIGRlc3Ryb3llciwgc3VibWFyaW5lLCBwYXRyb2xib2F0XTtcbiAgICBjb25zdCBzaGlwSGl0Ym94ID0gW11cbiAgICBsZXQgY3B1QXR0YWNrQ29vcmQgPSBbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogOSksTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogOSldXG4gICAgbGV0IGF0dGFja2VkQ29vcmQgPSBwbGF5ZXJHYW1lQm9hcmQucmVjZWl2ZUF0dGFjayh0ZXN0Q29vcmQsIHNoaXBzKVxuICAgIHNoaXBzW2F0dGFja2VkQ29vcmRdLmdvdEhpdCgpXG4gICAgXG5cbn1cbmZ1bmN0aW9uIGNwdSgpe1xuICAgIGNvbnN0IGRvbUJvYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnJpZ2h0R3JpZCcpXG4gICAgbGV0IHBsYXllck5hbWUgPSAnY3B1J1xuICAgIGNvbnN0IGNhcnJpZXIgPSBzaGlwRmFjdG9yeSg1LCAnY2FycmllcicpXG4gICAgY29uc3QgYmF0dGxlc2hpcCA9IHNoaXBGYWN0b3J5KDQsICdiYXR0bGVzaGlwJylcbiAgICBjb25zdCBkZXN0cm95ZXIgPSBzaGlwRmFjdG9yeSgzLCAnZGVzdHJveWVyJylcbiAgICBjb25zdCBzdWJtYXJpbmUgPSBzaGlwRmFjdG9yeSgzLCAnc3VibWFyaW5lJylcbiAgICBjb25zdCBwYXRyb2xib2F0ID0gc2hpcEZhY3RvcnkoMiwgJ3BhdHJvbGJvYXQnKVxuICAgIGNvbnN0IGNwdUdhbWVCb2FyZCA9IGdhbWVCb2FyZCgpXG4gICAgY3B1R2FtZUJvYXJkLmNyZWF0ZUJvYXJkKGRvbUJvYXJkLCBwbGF5ZXJOYW1lKVxuICAgIGNwdUdhbWVCb2FyZC5wbGFjZVNoaXAoY2FycmllciwgWzUsNF0pXG4gICAgY3B1R2FtZUJvYXJkLnBsYWNlU2hpcChiYXR0bGVzaGlwLCBbMiw2XSlcbiAgICBjcHVHYW1lQm9hcmQucGxhY2VTaGlwKGRlc3Ryb3llciwgWzEsNV0pXG4gICAgY3B1R2FtZUJvYXJkLnBsYWNlU2hpcChzdWJtYXJpbmUsIFs0LDRdKVxuICAgIGNwdUdhbWVCb2FyZC5wbGFjZVNoaXAocGF0cm9sYm9hdCwgWzUsNF0pXG4gICAgXG4gICBcblxufVxuKi9cbiJdLCJuYW1lcyI6WyJwbGF5ZXJET00iLCJlbmVteURPTSIsIm1vZHVsZSIsImV4cG9ydHMiLCJhdHRhY2tlZCIsImNhcnJpZXJIaXRib3giLCJiYXR0bGVzaGlwSGl0Ym94IiwiZGVzdHJveWVySGl0Ym94Iiwic3VibWFyaW5lSGl0Ym94IiwicGF0cm9sYm9hdEhpdGJveCIsImNyZWF0ZUJvYXJkIiwicGxheWVyTmFtZSIsImxlZnRHcmlkIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwicmlnaHRHcmlkIiwiY29vcmRzIiwieEF4aXMiLCJmb3JFYWNoIiwiZWwiLCJpIiwibGVuZ3RoIiwicHVzaCIsImUiLCJjZWxsIiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsInNldEF0dHJpYnV0ZSIsImFwcGVuZENoaWxkIiwicGxhY2VTaGlwIiwic2hpcCIsImNvb3JkIiwibmFtZSIsImNvbnNvbGUiLCJsb2ciLCJoaXRib3hLZXkiLCJ4IiwieSIsInRoaXMiLCJyZWNlaXZlQXR0YWNrIiwic2hpcEhpdGJveGVzIiwiaGl0Ym94ZXMiLCJhbGxTaGlwc1N1bmsiLCJzaGlwcyIsImV2ZXJ5IiwiaXNTdW5rIiwiY29sb3IiLCJnZXRFbGVtZW50QnlJZCIsInN0eWxlIiwiYmFja2dyb3VuZENvbG9yIiwiaGl0IiwiZ290SGl0IiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwidW5kZWZpbmVkIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsInNoaXBGYWN0b3J5IiwiZ2FtZUJvYXJkIiwiUGxheWVyIiwiY29uc3RydWN0b3IiLCJib2FyZCIsImVuZW15Qm9hcmQiLCJjYXJyaWVyIiwiY3JlYXRlQ2FycmllciIsImJhdHRsZXNoaXAiLCJjcmVhdGVCYXR0bGVzaGlwIiwiZGVzdHJveWVyIiwiY3JlYXRlRGVzdHJveWVyIiwic3VibWFyaW5lIiwiY3JlYXRlU3VibWFyaW5lIiwicGF0cm9sYm9hdCIsImNyZWF0ZVBhdHJvbGJvYXQiLCJlbmVteSIsImVuZW15Q2FycmllciIsImVuZW15QmF0dGxlc2hpcCIsImVuZW15RGVzdHJveWVyIiwiZW5lbXlTdWJtYXJpbmUiLCJlbmVteVBhdHJvbGJvYXQiLCJhdHRhY2siLCJxdWVyeVNlbGVjdG9yQWxsIiwiYWRkRXZlbnRMaXN0ZW5lciIsInNldFRpbWVvdXQiLCJjcHVBdHRhY2tDb29yZCIsImdlbiIsImdlbmVyYXRlQ29vcmQiLCJzb21lIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwiZ2VuZXJhdGVTaGlwQ29vcmQiLCJwbGFjZUNwdVNoaXBzIiwiZW5lbXlTaGlwcyIsIm9jY3VwaWVkIiwib2NjdXBpZWRUb3RhbCIsImNvbmNhdCIsIm9jYyIsImNoZWNrR2FtZU92ZXIiLCJhbGVydCIsImNyZWF0ZVBsYXllckJvYXJkIiwiY3JlYXRlRW5lbXlCb2FyZCIsInBsYXllckJvYXJkIiwicGxheWVyIiwiZ2FtZUxvb3AiXSwic291cmNlUm9vdCI6IiJ9